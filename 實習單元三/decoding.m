r1=1; r2=0; r3=1; r4=1; r5=0; r6=1; r7=1;
r=[r1 r2 r3 r4 r5 r6 r7]
b1=[r1]; b2=[r2]; b3=[r3]; b4=[r4]; b5=[r5]; b6=[r6]; b7=[r7];
x=[1 0 0 1 0 1 1];
s01=[0]; s02=[0]; s03=[1];
c0=s01*~s02*s03;
b=[rem(b1+c0,2) b2 b3 b4 b5 b6 b7];
s11=rem(s03+c0,2);
s12=rem(s01+s03,2);
s13=s02;
c1=s11*~s12*s13;
b=[rem(b7+c0,2) rem(b1+c0,2) b2 b3 b4 b5 b6];
s21=rem(s13+c1,2);
s22=rem(s11+s13,2);
s23=s12;
c2=s21*~s22*s23;
b=[rem(b6+c1,2) rem(b7+c1,2) rem(b1+c0,2) b2 b3 b4 b5];
s31=rem(s23+c2,2);
s32=rem(s21+s23,2);
s33=s22;
c3=s31*~s32*s33;
b=[rem(b5+c2,2) rem(b6+c2,2) rem(b7+c1,2) rem(b1+c0,2) b2 b3 b4];
s41=rem(s33+c3,2);
s42=rem(s31+s33,2);
s43=s32;
c4=s41*~s42*s43;
b=[rem(b4+c3,2) rem(b5+c3,2) rem(b6+c2,2) rem(b7+c1,2) rem(b1+c0,2) b2 b3];
s51=rem(s43+c4,2);
s52=rem(s41+s43,2);
s53=s42;
c5=s51*~s52*s53;
b=[rem(b3+c4,2) rem(b4+c3,2) rem(b5+c3,2) rem(b6+c2,2) rem(b7+c1,2) rem(b1+c0,2) b2];
